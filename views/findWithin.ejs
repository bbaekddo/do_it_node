<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" id="viewport" content="width=device-width, height=device-height, initial-scale=1">
    <title>Google Map</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        html, body {
            width: 100%;
            height: 100%;
        }

        #map {
            width: 100%;
            height: 95%;
        }
    </style>
</head>
<!--구글 맵 API 설정-->
<body onload="onLoad()">
<p>구글맵으로 내 위치 표시하기</p>
<div id="map"></div>

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB7PXsb6egeZEq6YqLv4QrZp5vTBMBCg-8&callback=initMap"></script>
<script>
    function onLoad() {
        initMap();
    }

    let map;

    // 내 위치
    const centerLocation = { lng: <%= paramLongitude %>, lat: <%= paramLatitude %> };

    // 카페 위치
    const cafeLocation = { lng: <%= result.geometry.coordinates[0] %>, lat: <%= result.geometry.coordinates[1] %> }

    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: centerLocation,
            zoom: 17
        });

        const marker = new google.maps.Marker({
            position: centerLocation,
            icon: '/public/mylocation.png',
            animation: google.maps.Animation.BOUNCE
        });

        const cafeMarker = new google.maps.Marker({
            position: cafeLocation,
            icon:'/public/cafe.png'
        })

        marker.setMap(map);
        cafeMarker.setMap(map);

        // 검색 영역 좌표
        let coords = new google.maps.LatLngBounds(
            { lat: <%= paramTopLeftLatitude %>, lng: <%= paramTopLeftLongitude %> },
            { lat: <%= paramBottomRightLatitude %>, lng: <%= paramBottomRightLongitude %> }
        );

        // 검색하려는 영역 표시
        const rectangle = new google.maps.Rectangle({
            bounds: coords,
            strokeColor: '#0000FF',
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: '#0000FF',
            fillOpacity: 0.4
        });

        rectangle.setMap(map);
    }
</script>
</body>
</html>